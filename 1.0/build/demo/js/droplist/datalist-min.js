/*!build time : 2014-04-20 5:18:09 PM*/
KISSY.add(function(a){function b(){this._init.apply(this,arguments)}var c="__id",d="__index",e={dataSource:null};return a.augment(b,a.EventTarget,{_init:function(b){b=this.cfg=a.merge(e,b),this.cache={},this._dataMap={},this._initSelected=b.selected,this._custom=b.custom},getDataByValue:function(b){if(this.getDataSource()){var c;return a.each(this.getDataSource(),function(a){return a.value===b?(c=a,!1):void 0}),c}},getClientId:function(a){return a&&a[c]},getDataByText:function(b){if(this.getDataSource()){var c;return a.each(this.getDataSource(),function(a){return a.text===b?(c=a,!1):void 0}),c}},select:function(b){var c=b;a.isPlainObject(b)||void 0==b||(c=this._dataMap[b]),this._selectByData(c)},_selectByData:function(a){var b=this.selected;b==a||b&&a&&a.value===b.value||(this.selected=a,this.fire("selected",{data:a}))},getSelectedData:function(){return this.selected||this._initSelected},setDataSource:function(a,b){this.cache[a]=b,this._list=b},getDataSource:function(a){return a=a||"",this.cache[a]},dataFactory:function(b){var e=this,f=e.getSelectedData(),g=[],h=!1,i=this._dataMap;return e.selected=void 0,a.each(b,function(b,j){var k=a.guid();b[c]=k,b[d]=j,i[k]=b,g.push(b),f&&b.value==f.value&&(h=!0,e.select(k))}),f&&!h&&e._custom&&this.fire("selected",{data:f}),delete e._initSelected,g}}),b});