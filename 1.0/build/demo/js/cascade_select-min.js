/*!build time : 2014-04-20 5:18:09 PM*/
KISSY.add("CascadeSelect",function(){var a=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},b={create:function(){return function(){this.initialize.apply(this,arguments)}}},c=function(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)},d=b.create();return d.prototype={initialize:function(b,d,e){if(!(b.length<=0||d.length<=0)){var f=this;this.selects=[],this.menu=d,this.options={ShowEmpty:!1,EmptyText:"\u8bf7\u9009\u62e9",EmptyValue:"",Txt:"txt",Val:"val",Sub:"sub"};for(i in e)f.options[i]=e[i];this.defaults=this.options.Default||[],this.showEmpty=this.options.ShowEmpty,this.emptyText=this.options.EmptyText,c(b,function(b,c){a(f.selects[c]=document.getElementById(b),"change",function(){f.setSelect(c)})}),this.reStart()}},reStart:function(){var a=this.selects,b=this.menu;this._setAllSelect(a[0],b,this.defaults.shift()),this.setSelect(0)},setSelect:function(a){for(var b="",d=this.selects,e=this,f=this.menu,g=1,h=d.length;h>g;g++)if(d[g-1].selectedIndex>-1&&(b=d[g-1].options[d[g-1].selectedIndex].value),""!=b?c(f,function(a){b==a[e.options.Val]&&(f=a[e.options.Sub]||[])}):f=[],g>a)if(f.length>0){var i="";0!=e.defaults.length?i=e.defaults:i,this._setAllSelect(d[g],f,i)}else this._setAllSelect(d[g],[],"")},_setAllSelect:function(a,b,d){var e=this;if(a.options.length=0,a.disabled=!1,e.showEmpty){var f=e._createOption("",e.emptyText);e._setOption(a,f),f.selected=!1}return b.length<=0?void(a.disabled=!0):void c(b,function(b){var c=e._createOption(b[e.options.Val],b[e.options.Txt]?b[e.options.Txt]:b[e.options.Val]);e._setOption(a,c),c.selected=d==c.value})},_setOption:function(a,b){a.appendChild(b)},_createOption:function(a,b){var c=document.createElement("option");return c.value=a,c.innerHTML=b,c}},d});